<?php
abstract class TwoColumnController extends AbstractController
{
    
    protected function searchVal() : string 
    {
        return $this->formName."search";
    }

    protected function runSearch() 
    {
        if (!isset($_SESSION[$this->searchVal()])) return;
        $search = $_SESSION[$this->searchVal()]; 
        $this->filterBy(
            function($record) use($search) : bool
            {
                $db = DB::cast($record);
                return Sys::contains($search,$db->Name,true);
            });
    }

    protected function switchSearchValue(AbstractTwoColumns $db) : bool
    {
        if (isset($_SESSION[$this->searchVal()]) && strlen($_SESSION[$this->searchVal()])>0) 
        {
            if (!Sys::contains($_SESSION[$this->searchVal()],$db->Name,true))
                return $_SESSION[$this->searchVal()] = $db->Name; 
        }
        return false;
    }
}

?>